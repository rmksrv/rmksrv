import{s as f}from"./typingInterval-b805e32c.js";import{o as p}from"./isInRange-d476866c.js";let m=[];const d=t=>m.find(n=>n.currentNode===t),g=t=>{const n=(e=>{const r=/(<([^>]+)>)/g,o=[];let a;for(;(a=r.exec(e.innerHTML))!==null;){const c=a.index,i=r.lastIndex;o.push([c,i-1])}return o})(t),s=t.innerHTML.split("").map((e,r)=>{const{matchingLetters:o}=d(t),a=o.includes(r)||e.match(/\s+/g)||((i,l)=>l.some(([u,h])=>p(i,[u,h])))(r,n),c=String.fromCharCode(65+Math.round(50*Math.random()));return a?e:c}).join("");t.innerHTML=s},L=(t,n)=>{const s=t.innerHTML;for(let e=0;e<n.length;e++){const r=n[e],{matchingLetters:o}=d(t);!o.includes(e)&&r===s[e]&&o.push(e)}},H=async({elements:t},n)=>{m=[...t.map(({currentNode:s})=>({currentNode:s,matchingLetters:[]}))],await new Promise(s=>{t.forEach(async({currentNode:e,text:r})=>{const o=typeof n.scramble=="number"?n.scramble:3e3,a=new Date().getTime();for(;;){g(e),L(e,r),await f(n.interval);const c=e.innerHTML!=r,i=new Date().getTime()-a<o;if(!c||!i){s();break}}e.innerHTML=r})}),n.dispatch("done")};export{H as mode};
